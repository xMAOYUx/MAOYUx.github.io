---
import { Book, FileText, ScrollText, Newspaper, GraduationCap, ExternalLink } from 'lucide-astro';

interface Props {
  id: string;
  title: string;
  author?: string;
  type: "paper" | "book" | "specification" | "article" | "course";
  description: string;
  url?: string;
  tags: string[];
}

const { id, title, author, type, description, url, tags } = Astro.props;

// Type icons and colors
const typeConfig: Record<string, { icon: any; color: string; label: string }> = {
  paper: { icon: FileText, color: "text-blue-400", label: "Paper" },
  book: { icon: Book, color: "text-amber-400", label: "Book" },
  specification: { icon: ScrollText, color: "text-emerald-400", label: "Specification" },
  article: { icon: Newspaper, color: "text-purple-400", label: "Article" },
  course: { icon: GraduationCap, color: "text-pink-400", label: "Course" },
};

const config = typeConfig[type] || typeConfig.article;
const IconComponent = config.icon;
---

<article class="group relative bg-slate-800/30 border border-slate-700/30 rounded-lg p-5 hover:border-emerald-500/30 hover:bg-slate-800/50 transition-all duration-300">
  <div class="flex items-start gap-4">
    <!-- Icon -->
    <div class={`flex-shrink-0 p-2 rounded-lg bg-slate-800/80 ${config.color}`}>
      <IconComponent class="w-5 h-5" />
    </div>

    <!-- Content -->
    <div class="flex-grow min-w-0">
      <!-- Type Badge & Title -->
      <div class="flex items-center gap-2 mb-1">
        <span class={`text-xs font-mono ${config.color}`}>
          {config.label}
        </span>
      </div>

      <h3 class="text-base font-semibold text-slate-100 mb-1 group-hover:text-emerald-400 transition-colors leading-tight">
        {url ? (
          <a href={url} target="_blank" rel="noopener noreferrer" class="hover:underline inline-flex items-center gap-1">
            {title}
            <ExternalLink class="w-3 h-3 opacity-50" />
          </a>
        ) : (
          title
        )}
      </h3>

      {author && (
        <p class="text-sm text-slate-500 mb-2 font-mono">
          {author}
        </p>
      )}

      <p class="text-sm text-slate-400 leading-relaxed mb-3">
        {description}
      </p>

      <!-- Tags -->
      <div class="flex flex-wrap gap-1.5">
        {tags.map((tag) => (
          <span class="px-2 py-0.5 text-xs rounded bg-slate-700/30 text-slate-400 border border-slate-700/30">
            {tag}
          </span>
        ))}
      </div>
    </div>
  </div>
</article>
