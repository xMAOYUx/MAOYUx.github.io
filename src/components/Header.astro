---
import { navItems, profile } from '../data/portfolio';
import { Menu, X, Linkedin, Sun, Moon } from 'lucide-astro';
---

<header class="fixed top-0 left-0 right-0 z-40 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800/50 transition-colors duration-300">
  <nav class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <!-- Logo/Name -->
      <a href="#" class="font-mono font-bold text-lg text-slate-900 dark:text-slate-100 hover:text-teal-600 dark:hover:text-teal-400 transition-colors">
        <span class="text-teal-600 dark:text-teal-400">&gt;</span> {profile.name.split(' ')[0].toLowerCase()}_
      </a>

      <!-- Desktop Navigation -->
      <div class="hidden md:flex items-center gap-8">
        {navItems.map((item) => (
          <a
            href={item.href}
            class="text-sm font-medium text-slate-600 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400 transition-colors"
          >
            {item.label}
          </a>
        ))}
        {profile.linkedin && (
          <a
            href={profile.linkedin}
            target="_blank"
            rel="noopener noreferrer"
            class="p-2 text-slate-600 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400 transition-colors"
            aria-label="LinkedIn"
          >
            <Linkedin class="w-5 h-5" />
          </a>
        )}
        
        <!-- Theme Toggle Button -->
        <button
          id="theme-toggle"
          type="button"
          class="p-2 text-slate-600 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400 hover:bg-slate-100 dark:hover:bg-slate-800/50 rounded-lg transition-colors"
          aria-label="Toggle theme"
        >
          <Sun class="w-5 h-5 hidden dark:block" />
          <Moon class="w-5 h-5 block dark:hidden" />
        </button>
        
        <a
          href={`mailto:${profile.email}`}
          class="px-4 py-2 text-sm font-medium rounded-md bg-teal-500/10 text-teal-700 dark:text-teal-300 hover:text-teal-800 dark:hover:text-teal-200 hover:bg-teal-500/20 border border-teal-500/30 transition-colors"
        >
          Get in Touch
        </a>
      </div>

      <!-- Mobile Menu Button -->
      <div class="flex items-center gap-2 md:hidden">
        <!-- Mobile Theme Toggle -->
        <button
          id="theme-toggle-mobile"
          type="button"
          class="p-2 text-slate-600 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400 transition-colors"
          aria-label="Toggle theme"
        >
          <Sun class="w-5 h-5 hidden dark:block" />
          <Moon class="w-5 h-5 block dark:hidden" />
        </button>
        
        <button
          type="button"
          id="mobile-menu-btn"
          class="p-2 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100 transition-colors"
          aria-label="Toggle menu"
        >
          <Menu class="w-6 h-6 block" id="menu-icon-open" />
          <X class="w-6 h-6 hidden" id="menu-icon-close" />
        </button>
      </div>
    </div>

    <!-- Mobile Navigation -->
    <div id="mobile-menu" class="hidden md:hidden pb-4">
      <div class="flex flex-col gap-2">
        {navItems.map((item) => (
          <a
            href={item.href}
            class="px-3 py-2 text-sm font-medium text-slate-600 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400 hover:bg-slate-100 dark:hover:bg-slate-800/50 rounded-md transition-colors"
          >
            {item.label}
          </a>
        ))}
        {profile.linkedin && (
          <a
            href={profile.linkedin}
            target="_blank"
            rel="noopener noreferrer"
            class="px-3 py-2 text-sm font-medium text-slate-600 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400 hover:bg-slate-100 dark:hover:bg-slate-800/50 rounded-md transition-colors flex items-center gap-2"
          >
            <Linkedin class="w-4 h-4" />
            LinkedIn
          </a>
        )}
        <a
          href={`mailto:${profile.email}`}
          class="mt-2 px-4 py-2 text-sm font-medium text-center rounded-md bg-teal-500/10 text-teal-700 dark:text-teal-300 hover:text-teal-800 dark:hover:text-teal-200 hover:bg-teal-500/20 border border-teal-500/30 transition-colors"
        >
          Get in Touch
        </a>
      </div>
    </div>
  </nav>
</header>

<script>
  // Theme toggle functionality
  function initTheme() {
    const themeToggle = document.getElementById('theme-toggle');
    const themeToggleMobile = document.getElementById('theme-toggle-mobile');
    
    function toggleTheme() {
      const isDark = document.documentElement.classList.toggle('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      document.getElementById('theme-color-meta')?.setAttribute('content', isDark ? '#0f172a' : '#ffffff');
    }
    
    themeToggle?.addEventListener('click', toggleTheme);
    themeToggleMobile?.addEventListener('click', toggleTheme);
  }
  
  // Mobile menu functionality
  function initMobileMenu() {
    const menuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    const iconOpen = document.getElementById('menu-icon-open');
    const iconClose = document.getElementById('menu-icon-close');

    menuBtn?.addEventListener('click', () => {
      mobileMenu?.classList.toggle('hidden');
      iconOpen?.classList.toggle('hidden');
      iconOpen?.classList.toggle('block');
      iconClose?.classList.toggle('hidden');
      iconClose?.classList.toggle('block');
    });

    // Close menu when clicking a link
    mobileMenu?.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => {
        mobileMenu?.classList.add('hidden');
        iconOpen?.classList.remove('hidden');
        iconOpen?.classList.add('block');
        iconClose?.classList.add('hidden');
        iconClose?.classList.remove('block');
      });
    });
  }
  
  initTheme();
  initMobileMenu();
</script>
